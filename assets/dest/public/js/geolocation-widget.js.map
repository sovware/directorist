{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/js/map-scripts/geolocation-widget.js"],"names":["$","adbdp_geolocation","select_listing_map","x","document","querySelector","get_lat","get_lng","getLocation","navigator","geolocation","getCurrentPosition","showPosition","showError","value","position","lat","coords","latitude","lon","longitude","displayLocation","error","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","geocoder","google","maps","Geocoder","latlng","LatLng","geocode","results","status","GeocoderStatus","OK","add","formatted_address","split","count","length","country","state","city","get_loc_btn","addEventListener","atbdp_search_listing","i18n_text","initialize","input","getElementById","options","countryRestriction","types","componentRestrictions","restricted_countries","autocomplete","places","Autocomplete","event","addListener","place","getPlace","geometry","location","lng","addDomListener","window","on","preventDefault","search","val","css","res","ajax","url","type","data","success","i","display_name","html","text","hide","jQuery"],"mappings":"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","file":"geolocation-widget.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n","(function ($) {\n    /*// Price Range Slider\n    var slider_range = $(\".atbd_slider-range\");\n    var miles = atbdp_search_listing.i18n_text.Miles;\n    var dvalue = $(\"#atbd_rs_value\").val();\n    slider_range.each(function () {\n        $(this).slider({\n            range: \"min\",\n            min: 0,\n            max: 1000,\n            value: dvalue,\n            slide: function (event, ui) {\n                $(\".atbdpr_amount\").text(ui.value + miles);\n                $(\"#atbd_rs_value\").val(ui.value);\n            }\n        });\n    });\n    $(\".atbdpr_amount\").text(slider_range.slider(\"value\") + miles);\n    $(\"#atbd_rs_value\").val(slider_range.slider(\"value\"));*/\n\n\n    /*\n    get current location\n*/\n    if('google' === adbdp_geolocation.select_listing_map) {\n        (function () {\n            var x = document.querySelector(\".widget-location-name\");\n            var get_lat = document.querySelector(\"#cityLat\");\n            var get_lng = document.querySelector(\"#cityLng\");\n\n            function getLocation() {\n                if (navigator.geolocation) {\n                    navigator.geolocation.getCurrentPosition(showPosition, showError);\n                } else {\n                    x.value = \"Geolocation is not supported by this browser.\";\n                }\n            }\n\n            function showPosition(position) {\n                lat = position.coords.latitude;\n                lon = position.coords.longitude;\n                displayLocation(lat, lon);\n                get_lat.value = lat;\n                get_lng.value = lon;\n            }\n\n            function showError(error) {\n                switch (error.code) {\n                    case error.PERMISSION_DENIED:\n                        x.value = \"User denied the request for Geolocation.\";\n                        break;\n                    case error.POSITION_UNAVAILABLE:\n                        x.value = \"Location information is unavailable.\";\n                        break;\n                    case error.TIMEOUT:\n                        x.value = \"The request to get user location timed out.\";\n                        break;\n                    case error.UNKNOWN_ERROR:\n                        x.value = \"An unknown error occurred.\";\n                        break;\n                }\n            }\n\n            function displayLocation(latitude, longitude) {\n                var geocoder;\n                geocoder = new google.maps.Geocoder();\n                var latlng = new google.maps.LatLng(latitude, longitude);\n                geocoder.geocode(\n                    {'latLng': latlng},\n                    function (results, status) {\n                        if (status == google.maps.GeocoderStatus.OK) {\n                            if (results[0]) {\n                                var add = results[0].formatted_address;\n                                var value = add.split(\",\");\n\n                                count = value.length;\n                                country = value[count - 1];\n                                state = value[count - 2];\n                                city = value[count - 3];\n                                x.value = city;\n                            } else {\n                                x.value = \"address not found\";\n                            }\n                        } else {\n                            x.value = \"Geocoder failed due to: \" + status;\n                        }\n                    }\n                );\n            }\n\n            var get_loc_btn = document.querySelector(\".atbd_get_loc_wid\");\n            get_loc_btn.addEventListener(\"click\", function () {\n                getLocation();\n            });\n            if (atbdp_search_listing.i18n_text.select_listing_map === 'google') {\n                function initialize() {\n                    var input = document.getElementById('address_widget');\n                    var options = atbdp_search_listing.countryRestriction ? {\n                        types: ['geocode'],\n                        componentRestrictions: {country: atbdp_search_listing.restricted_countries}\n                       } : '';\n                    var autocomplete = new google.maps.places.Autocomplete(input, options);\n                    google.maps.event.addListener(autocomplete, 'place_changed', function () {\n                        var place = autocomplete.getPlace();\n                        document.getElementById('cityLat').value = place.geometry.location.lat();\n                        document.getElementById('cityLng').value = place.geometry.location.lng();\n                    });\n                }\n\n                google.maps.event.addDomListener(window, 'load', initialize);\n            }\n        })();\n    } else if (atbdp_search_listing.i18n_text.select_listing_map === 'openstreet') {\n        $('#address_widget').on('keyup', function (event) {\n            event.preventDefault();\n            var search = $('#address_widget').val();\n            $('#address_widget_result').css({'display': 'block'});\n            if (search === \"\") {\n                $('#address_widget_result').css({'display': 'none'});\n            }\n\n            var res = \"\";\n            $.ajax({\n                url: `https://nominatim.openstreetmap.org/?q=%27+${search}+%27&format=json`,\n                type: 'POST',\n                data: {},\n                success: function (data) {\n                    //console.log(data);\n                    for (var i = 0; i < data.length; i++) {\n                        res += '<li><a href=\"#\" data-lat=' + data[i].lat + ' data-lon=' + data[i].lon + '>' + data[i].display_name + '</a></li>'\n                    }\n                    $('#address_widget_result').html('<ul>' + res + '</ul>');\n                }\n            });\n        });\n\n        $('body').on('click', '#address_widget_result ul li a', function (event) {\n            event.preventDefault();\n            let text = $(this).text(),\n                lat = $(this).data('lat'),\n                lon = $(this).data('lon');\n\n            $('#cityLat').val(lat);\n            $('#cityLng').val(lon);\n\n            $('#address_widget').val(text);\n            $('#address_widget_result').hide();\n        });\n\n        function displayLocation(position) {\n            var lat = position.coords.latitude;\n            var lng = position.coords.longitude;\n\n            $.ajax({\n                url: `https://nominatim.openstreetmap.org/reverse?format=json&lon=${lng}&lat=${lat}`,\n                type: 'POST',\n                data: {},\n                success: function (data) {\n                    $('#address_widget').val(data.display_name);\n                    $('#cityLat').val(lat);\n                    $('#cityLng').val(lng);\n                }\n            });\n        }\n\n        $(\".atbd_get_loc_wid\").on('click', () => {\n            navigator.geolocation.getCurrentPosition(displayLocation);\n\n        })\n    }\n    if ($('#address_widget').val() === \"\") {\n        $('#address_widget_result').css({'display': 'none'});\n    }\n})(jQuery);\n"],"sourceRoot":""}