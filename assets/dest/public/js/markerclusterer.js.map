{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/js/map-scripts/markerclusterer.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js"],"names":["MarkerClusterer","map","opt_markers","opt_options","extend","google","maps","OverlayView","map_","markers_","clusters_","sizes","styles_","cssClass_","ready_","options","gridSize_","minClusterSize_","maxZoom_","imagePath_","MARKER_CLUSTER_IMAGE_PATH_","imageExtension_","MARKER_CLUSTER_IMAGE_EXTENSION_","zoomOnClick_","undefined","averageCenter_","setupStyles_","setMap","prevZoom_","getZoom","that","event","addListener","zoom","resetViewport","redraw","length","addMarkers","prototype","obj1","obj2","object","property","apply","onAdd","setReady_","draw","i","size","push","url","height","width","fitMapToMarkers","markers","getMarkers","bounds","LatLngBounds","marker","getPosition","fitBounds","setStyles","styles","getStyles","isZoomOnClick","isAverageCenter","getTotalMarkers","setMaxZoom","maxZoom","getMaxZoom","calculator_","numStyles","index","count","dv","parseInt","Math","min","text","setCalculator","calculator","getCalculator","opt_nodraw","pushMarkerTo_","isAdded","repaint","addMarker","removeMarker_","indexOf","m","splice","removeMarker","removed","removeMarkers","r","ready","createClusters_","getTotalClusters","getMap","getGridSize","setGridSize","getMinClusterSize","setMinClusterSize","getExtendedBounds","projection","getProjection","tr","LatLng","getNorthEast","lat","lng","bl","getSouthWest","trPix","fromLatLngToDivPixel","x","y","blPix","ne","fromDivPixelToLatLng","sw","isMarkerInBounds_","contains","clearMarkers","opt_hide","cluster","remove","oldClusters","slice","window","setTimeout","distanceBetweenPoints_","p1","p2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","d","addToClosestCluster_","distance","clusterToAddTo","pos","center","getCenter","isMarkerInClusterBounds","Cluster","mapBounds","getBounds","markerClusterer","markerClusterer_","center_","bounds_","clusterIcon_","ClusterIcon","isMarkerAlreadyAdded","calculateBounds_","l","len","updateIcon","getMarkerClusterer","getSize","mz","hide","sums","setCenter","setSums","show","opt_padding","padding_","cluster_","div_","sums_","visible_","triggerClusterClick","trigger","document","createElement","getPosFromLatLng_","style","cssText","createCss","innerHTML","className","panes","getPanes","overlayMouseTarget","appendChild","addDomListener","latlng","width_","height_","top","left","display","onRemove","parentNode","removeChild","text_","index_","useStyle","max","url_","textColor_","anchor_","textSize_","backgroundPosition_","backgroundPosition","txtColor","txtSize","join"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,eAAT,CAAyBC,GAAzB,EAA8BC,WAA9B,EAA2CC,WAA3C,EAAwD;AACpD;AACA;AACA;AACA;AACA;AACA,OAAKC,MAAL,CAAYJ,eAAZ,EAA6BK,MAAM,CAACC,IAAP,CAAYC,WAAzC;AACA,OAAKC,IAAL,GAAYP,GAAZ;AAEA;AACJ;AACA;AACA;;AACI,OAAKQ,QAAL,GAAgB,EAAhB;AAEA;AACJ;AACA;;AACI,OAAKC,SAAL,GAAiB,EAAjB;AAEA,OAAKC,KAAL,GAAa,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB,CAAb;AAEA;AACJ;AACA;;AACI,OAAKC,OAAL,GAAe,EAAf;AAEA;AACJ;AACA;;AACI,O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","file":"markerclusterer.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @externs_url http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/maps/google_maps_api_v3_3.js\r\n// ==/ClosureCompiler==\r\n\r\n/**\r\n * @name MarkerClusterer for Google Maps v3\r\n * @version version 1.0\r\n * @author Luke Mahe\r\n * @fileoverview\r\n * The library creates and manages per-zoom-level clusters for large amounts of\r\n * markers.\r\n * <br/>\r\n * This is a v3 implementation of the\r\n * <a href=\"http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/\"\r\n * >v2 MarkerClusterer</a>.\r\n */\r\n\r\n/**\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\n\r\n/**\r\n * A Marker Clusterer that clusters markers.\r\n *\r\n * @param {google.maps.Map} map The Google map to attach to.\r\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\r\n *   the cluster.\r\n * @param {Object=} opt_options support the following options:\r\n *     'gridSize': (number) The grid size of a cluster in pixels.\r\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\r\n *                cluster.\r\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\r\n *                    cluster is to zoom into it.\r\n *     'averageCenter': (boolean) Wether the center of each cluster should be\r\n *                      the average of all markers in the cluster.\r\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\r\n *                           cluster before the markers are hidden and a count\r\n *                           is shown.\r\n *     'styles': (object) An object that has style properties:\r\n *       'url': (string) The image url.\r\n *       'height': (number) The image height.\r\n *       'width': (number) The image width.\r\n *       'anchor': (Array) The anchor position of the label text.\r\n *       'textColor': (string) The text color.\r\n *       'textSize': (number) The text size.\r\n *       'backgroundPosition': (string) The position of the background x, y.\r\n *     'cssClass': (string) One or more CSS class for styling this marker.\r\n * @constructor\r\n * @extends google.maps.OverlayView\r\n */\r\nfunction MarkerClusterer(map, opt_markers, opt_options) {\r\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\r\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\r\n    // because it might not always be available when the code is defined so we\r\n    // look for it at the last possible moment. If it doesn't exist now then\r\n    // there is no point going ahead :)\r\n    this.extend(MarkerClusterer, google.maps.OverlayView);\r\n    this.map_ = map;\r\n\r\n    /**\r\n     * @type {Array.<google.maps.Marker>}\r\n     * @private\r\n     */\r\n    this.markers_ = [];\r\n\r\n    /**\r\n     *  @type {Array.<Cluster>}\r\n     */\r\n    this.clusters_ = [];\r\n\r\n    this.sizes = [53, 56, 66, 78, 90];\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    this.styles_ = [];\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    this.cssClass_ = '';\r\n\r\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.ready_ = false;\r\n\r\n    var options = opt_options || {};\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.gridSize_ = options['gridSize'] || 60;\r\n\r\n    /**\r\n     * @private\r\n     */\r\n    this.minClusterSize_ = options['minimumClusterSize'] || 2;\r\n\r\n\r\n    /**\r\n     * @type {?number}\r\n     * @private\r\n     */\r\n    this.maxZoom_ = options['maxZoom'] || null;\r\n\r\n    this.styles_ = options['styles'] || [];\r\n\r\n    this.cssClass_ = options['cssClass'] || null;\r\n\r\n    /**\r\n     * @type {string}\r\n     * @private\r\n     */\r\n    this.imagePath_ = options['imagePath'] ||\r\n        this.MARKER_CLUSTER_IMAGE_PATH_;\r\n\r\n    /**\r\n     * @type {string}\r\n     * @private\r\n     */\r\n    this.imageExtension_ = options['imageExtension'] ||\r\n        this.MARKER_CLUSTER_IMAGE_EXTENSION_;\r\n\r\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.zoomOnClick_ = true;\r\n\r\n    if (options['zoomOnClick'] != undefined) {\r\n      this.zoomOnClick_ = options['zoomOnClick'];\r\n    }\r\n\r\n    /**\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.averageCenter_ = false;\r\n\r\n    if (options['averageCenter'] != undefined) {\r\n      this.averageCenter_ = options['averageCenter'];\r\n    }\r\n\r\n    this.setupStyles_();\r\n\r\n    this.setMap(map);\r\n\r\n    /**\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    this.prevZoom_ = this.map_.getZoom();\r\n\r\n    // Add the map event listeners\r\n    var that = this;\r\n    google.maps.event.addListener(this.map_, 'zoom_changed', function() {\r\n      var zoom = that.map_.getZoom();\r\n\r\n      if (that.prevZoom_ != zoom) {\r\n        that.prevZoom_ = zoom;\r\n        that.resetViewport();\r\n      }\r\n    });\r\n\r\n    google.maps.event.addListener(this.map_, 'idle', function() {\r\n      that.redraw();\r\n    });\r\n\r\n    // Finally, add the markers\r\n    if (opt_markers && opt_markers.length) {\r\n      this.addMarkers(opt_markers, false);\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * The marker cluster image path.\r\n   *\r\n   * @type {string}\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ =\r\n      'http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/' +\r\n      'images/m';\r\n\r\n\r\n  /**\r\n   * The marker cluster image path.\r\n   *\r\n   * @type {string}\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\r\n\r\n\r\n  /**\r\n   * Extends a objects prototype by anothers.\r\n   *\r\n   * @param {Object} obj1 The object to be extended.\r\n   * @param {Object} obj2 The object to extend with.\r\n   * @return {Object} The new extended object.\r\n   * @ignore\r\n   */\r\n  MarkerClusterer.prototype.extend = function(obj1, obj2) {\r\n    return (function(object) {\r\n      for (var property in object.prototype) {\r\n        this.prototype[property] = object.prototype[property];\r\n      }\r\n      return this;\r\n    }).apply(obj1, [obj2]);\r\n  };\r\n\r\n\r\n  /**\r\n   * Implementaion of the interface method.\r\n   * @ignore\r\n   */\r\n  MarkerClusterer.prototype.onAdd = function() {\r\n    this.setReady_(true);\r\n  };\r\n\r\n  /**\r\n   * Implementaion of the interface method.\r\n   * @ignore\r\n   */\r\n  MarkerClusterer.prototype.draw = function() {};\r\n\r\n  /**\r\n   * Sets up the styles object.\r\n   *\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.setupStyles_ = function() {\r\n    if (this.styles_.length) {\r\n      return;\r\n    }\r\n\r\n    for (var i = 0, size; size = this.sizes[i]; i++) {\r\n      this.styles_.push({\r\n        url: this.imagePath_ + (i + 1) + '.' + this.imageExtension_,\r\n        height: size,\r\n        width: size\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  Fit the map to the bounds of the markers in the clusterer.\r\n   */\r\n  MarkerClusterer.prototype.fitMapToMarkers = function() {\r\n    var markers = this.getMarkers();\r\n    var bounds = new google.maps.LatLngBounds();\r\n    for (var i = 0, marker; marker = markers[i]; i++) {\r\n      bounds.extend(marker.getPosition());\r\n    }\r\n\r\n    this.map_.fitBounds(bounds);\r\n  };\r\n\r\n\r\n  /**\r\n   *  Sets the styles.\r\n   *\r\n   *  @param {Object} styles The style to set.\r\n   */\r\n  MarkerClusterer.prototype.setStyles = function(styles) {\r\n    this.styles_ = styles;\r\n  };\r\n\r\n\r\n  /**\r\n   *  Gets the styles.\r\n   *\r\n   *  @return {Object} The styles object.\r\n   */\r\n  MarkerClusterer.prototype.getStyles = function() {\r\n    return this.styles_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Whether zoom on click is set.\r\n   *\r\n   * @return {boolean} True if zoomOnClick_ is set.\r\n   */\r\n  MarkerClusterer.prototype.isZoomOnClick = function() {\r\n    return this.zoomOnClick_;\r\n  };\r\n\r\n  /**\r\n   * Whether average center is set.\r\n   *\r\n   * @return {boolean} True if averageCenter_ is set.\r\n   */\r\n  MarkerClusterer.prototype.isAverageCenter = function() {\r\n    return this.averageCenter_;\r\n  };\r\n\r\n\r\n  /**\r\n   *  Returns the array of markers in the clusterer.\r\n   *\r\n   *  @return {Array.<google.maps.Marker>} The markers.\r\n   */\r\n  MarkerClusterer.prototype.getMarkers = function() {\r\n    return this.markers_;\r\n  };\r\n\r\n\r\n  /**\r\n   *  Returns the number of markers in the clusterer\r\n   *\r\n   *  @return {Number} The number of markers.\r\n   */\r\n  MarkerClusterer.prototype.getTotalMarkers = function() {\r\n    return this.markers_.length;\r\n  };\r\n\r\n\r\n  /**\r\n   *  Sets the max zoom for the clusterer.\r\n   *\r\n   *  @param {number} maxZoom The max zoom level.\r\n   */\r\n  MarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\r\n    this.maxZoom_ = maxZoom;\r\n  };\r\n\r\n\r\n  /**\r\n   *  Gets the max zoom for the clusterer.\r\n   *\r\n   *  @return {number} The max zoom level.\r\n   */\r\n  MarkerClusterer.prototype.getMaxZoom = function() {\r\n    return this.maxZoom_;\r\n  };\r\n\r\n\r\n  /**\r\n   *  The function for calculating the cluster icon image.\r\n   *\r\n   *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\r\n   *  @param {number} numStyles The number of styles available.\r\n   *  @return {Object} A object properties: 'text' (string) and 'index' (number).\r\n   *  @private\r\n   */\r\n  MarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\r\n    var index = 0;\r\n    var count = markers.length;\r\n    var dv = count;\r\n    while (dv !== 0) {\r\n      dv = parseInt(dv / 10, 10);\r\n      index++;\r\n    }\r\n\r\n    index = Math.min(index, numStyles);\r\n    return {\r\n      text: count,\r\n      index: index\r\n    };\r\n  };\r\n\r\n\r\n  /**\r\n   * Set the calculator function.\r\n   *\r\n   * @param {function(Array, number)} calculator The function to set as the\r\n   *     calculator. The function should return a object properties:\r\n   *     'text' (string) and 'index' (number).\r\n   *\r\n   */\r\n  MarkerClusterer.prototype.setCalculator = function(calculator) {\r\n    this.calculator_ = calculator;\r\n  };\r\n\r\n\r\n  /**\r\n   * Get the calculator function.\r\n   *\r\n   * @return {function(Array, number)} the calculator function.\r\n   */\r\n  MarkerClusterer.prototype.getCalculator = function() {\r\n    return this.calculator_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Add an array of markers to the clusterer.\r\n   *\r\n   * @param {Array.<google.maps.Marker>} markers The markers to add.\r\n   * @param {boolean=} opt_nodraw Whether to redraw the clusters.\r\n   */\r\n  MarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\r\n    for (var i = 0, marker; marker = markers[i]; i++) {\r\n      this.pushMarkerTo_(marker);\r\n    }\r\n    if (!opt_nodraw) {\r\n      this.redraw();\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Pushes a marker to the clusterer.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to add.\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\r\n    marker.isAdded = false;\r\n    if (marker['draggable']) {\r\n      // If the marker is draggable add a listener so we update the clusters on\r\n      // the drag end.\r\n      var that = this;\r\n      google.maps.event.addListener(marker, 'dragend', function() {\r\n        marker.isAdded = false;\r\n        that.repaint();\r\n      });\r\n    }\r\n    this.markers_.push(marker);\r\n  };\r\n\r\n\r\n  /**\r\n   * Adds a marker to the clusterer and redraws if needed.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to add.\r\n   * @param {boolean=} opt_nodraw Whether to redraw the clusters.\r\n   */\r\n  MarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\r\n    this.pushMarkerTo_(marker);\r\n    if (!opt_nodraw) {\r\n      this.redraw();\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Removes a marker and returns true if removed, false if not\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to remove\r\n   * @return {boolean} Whether the marker was removed or not\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.removeMarker_ = function(marker) {\r\n    var index = -1;\r\n    if (this.markers_.indexOf) {\r\n      index = this.markers_.indexOf(marker);\r\n    } else {\r\n      for (var i = 0, m; m = this.markers_[i]; i++) {\r\n        if (m == marker) {\r\n          index = i;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (index == -1) {\r\n      // Marker is not in our list of markers.\r\n      return false;\r\n    }\r\n\r\n    marker.setMap(null);\r\n\r\n    this.markers_.splice(index, 1);\r\n\r\n    return true;\r\n  };\r\n\r\n\r\n  /**\r\n   * Remove a marker from the cluster.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to remove.\r\n   * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\r\n   * @return {boolean} True if the marker was removed.\r\n   */\r\n  MarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\r\n    var removed = this.removeMarker_(marker);\r\n\r\n    if (!opt_nodraw && removed) {\r\n      this.resetViewport();\r\n      this.redraw();\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Removes an array of markers from the cluster.\r\n   *\r\n   * @param {Array.<google.maps.Marker>} markers The markers to remove.\r\n   * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\r\n   */\r\n  MarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\r\n    var removed = false;\r\n\r\n    for (var i = 0, marker; marker = markers[i]; i++) {\r\n      var r = this.removeMarker_(marker);\r\n      removed = removed || r;\r\n    }\r\n\r\n    if (!opt_nodraw && removed) {\r\n      this.resetViewport();\r\n      this.redraw();\r\n      return true;\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Sets the clusterer's ready state.\r\n   *\r\n   * @param {boolean} ready The state.\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.setReady_ = function(ready) {\r\n    if (!this.ready_) {\r\n      this.ready_ = ready;\r\n      this.createClusters_();\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the number of clusters in the clusterer.\r\n   *\r\n   * @return {number} The number of clusters.\r\n   */\r\n  MarkerClusterer.prototype.getTotalClusters = function() {\r\n    return this.clusters_.length;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the google map that the clusterer is associated with.\r\n   *\r\n   * @return {google.maps.Map} The map.\r\n   */\r\n  MarkerClusterer.prototype.getMap = function() {\r\n    return this.map_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Sets the google map that the clusterer is associated with.\r\n   *\r\n   * @param {google.maps.Map} map The map.\r\n   */\r\n  MarkerClusterer.prototype.setMap = function(map) {\r\n    this.map_ = map;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the size of the grid.\r\n   *\r\n   * @return {number} The grid size.\r\n   */\r\n  MarkerClusterer.prototype.getGridSize = function() {\r\n    return this.gridSize_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Sets the size of the grid.\r\n   *\r\n   * @param {number} size The grid size.\r\n   */\r\n  MarkerClusterer.prototype.setGridSize = function(size) {\r\n    this.gridSize_ = size;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the min cluster size.\r\n   *\r\n   * @return {number} The grid size.\r\n   */\r\n  MarkerClusterer.prototype.getMinClusterSize = function() {\r\n    return this.minClusterSize_;\r\n  };\r\n\r\n  /**\r\n   * Sets the min cluster size.\r\n   *\r\n   * @param {number} size The grid size.\r\n   */\r\n  MarkerClusterer.prototype.setMinClusterSize = function(size) {\r\n    this.minClusterSize_ = size;\r\n  };\r\n\r\n\r\n  /**\r\n   * Extends a bounds object by the grid size.\r\n   *\r\n   * @param {google.maps.LatLngBounds} bounds The bounds to extend.\r\n   * @return {google.maps.LatLngBounds} The extended bounds.\r\n   */\r\n  MarkerClusterer.prototype.getExtendedBounds = function(bounds) {\r\n    var projection = this.getProjection();\r\n\r\n    // Turn the bounds into latlng.\r\n    var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\r\n        bounds.getNorthEast().lng());\r\n    var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\r\n        bounds.getSouthWest().lng());\r\n\r\n    // Convert the points to pixels and the extend out by the grid size.\r\n    var trPix = projection.fromLatLngToDivPixel(tr);\r\n    trPix.x += this.gridSize_;\r\n    trPix.y -= this.gridSize_;\r\n\r\n    var blPix = projection.fromLatLngToDivPixel(bl);\r\n    blPix.x -= this.gridSize_;\r\n    blPix.y += this.gridSize_;\r\n\r\n    // Convert the pixel points back to LatLng\r\n    var ne = projection.fromDivPixelToLatLng(trPix);\r\n    var sw = projection.fromDivPixelToLatLng(blPix);\r\n\r\n    // Extend the bounds to contain the new bounds.\r\n    bounds.extend(ne);\r\n    bounds.extend(sw);\r\n\r\n    return bounds;\r\n  };\r\n\r\n\r\n  /**\r\n   * Determins if a marker is contained in a bounds.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to check.\r\n   * @param {google.maps.LatLngBounds} bounds The bounds to check against.\r\n   * @return {boolean} True if the marker is in the bounds.\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\r\n    return bounds.contains(marker.getPosition());\r\n  };\r\n\r\n\r\n  /**\r\n   * Clears all clusters and markers from the clusterer.\r\n   */\r\n  MarkerClusterer.prototype.clearMarkers = function() {\r\n    this.resetViewport(true);\r\n\r\n    // Set the markers a empty array.\r\n    this.markers_ = [];\r\n  };\r\n\r\n\r\n  /**\r\n   * Clears all existing clusters and recreates them.\r\n   * @param {boolean} opt_hide To also hide the marker.\r\n   */\r\n  MarkerClusterer.prototype.resetViewport = function(opt_hide) {\r\n    // Remove all the clusters\r\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\r\n      cluster.remove();\r\n    }\r\n\r\n    // Reset the markers to not be added and to be invisible.\r\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\r\n      marker.isAdded = false;\r\n      if (opt_hide) {\r\n        marker.setMap(null);\r\n      }\r\n    }\r\n\r\n    this.clusters_ = [];\r\n  };\r\n\r\n  /**\r\n   *\r\n   */\r\n  MarkerClusterer.prototype.repaint = function() {\r\n    var oldClusters = this.clusters_.slice();\r\n    this.clusters_.length = 0;\r\n    this.resetViewport();\r\n    this.redraw();\r\n\r\n    // Remove the old clusters.\r\n    // Do it in a timeout so the other clusters have been drawn first.\r\n    window.setTimeout(function() {\r\n      for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\r\n        cluster.remove();\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n\r\n  /**\r\n   * Redraws the clusters.\r\n   */\r\n  MarkerClusterer.prototype.redraw = function() {\r\n    this.createClusters_();\r\n  };\r\n\r\n\r\n  /**\r\n   * Calculates the distance between two latlng locations in km.\r\n   * @see http://www.movable-type.co.uk/scripts/latlong.html\r\n   *\r\n   * @param {google.maps.LatLng} p1 The first lat lng point.\r\n   * @param {google.maps.LatLng} p2 The second lat lng point.\r\n   * @return {number} The distance between the two points in km.\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\r\n    if (!p1 || !p2) {\r\n      return 0;\r\n    }\r\n\r\n    var R = 6371; // Radius of the Earth in km\r\n    var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\r\n    var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\r\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n        Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\r\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    var d = R * c;\r\n    return d;\r\n  };\r\n\r\n\r\n  /**\r\n   * Add a marker to a cluster, or creates a new cluster.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to add.\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\r\n    var distance = 40000; // Some large number\r\n    var clusterToAddTo = null;\r\n    var pos = marker.getPosition();\r\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\r\n      var center = cluster.getCenter();\r\n      if (center) {\r\n        var d = this.distanceBetweenPoints_(center, marker.getPosition());\r\n        if (d < distance) {\r\n          distance = d;\r\n          clusterToAddTo = cluster;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\r\n      clusterToAddTo.addMarker(marker);\r\n    } else {\r\n      var cluster = new Cluster(this);\r\n      cluster.addMarker(marker);\r\n      this.clusters_.push(cluster);\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Creates the clusters.\r\n   *\r\n   * @private\r\n   */\r\n  MarkerClusterer.prototype.createClusters_ = function() {\r\n    if (!this.ready_) {\r\n      return;\r\n    }\r\n\r\n    // Get our current map view bounds.\r\n    // Create a new bounds object so we don't affect the map.\r\n    var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\r\n        this.map_.getBounds().getNorthEast());\r\n    var bounds = this.getExtendedBounds(mapBounds);\r\n\r\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\r\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\r\n        this.addToClosestCluster_(marker);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * A cluster that contains markers.\r\n   *\r\n   * @param {MarkerClusterer} markerClusterer The markerclusterer that this\r\n   *     cluster is associated with.\r\n   * @constructor\r\n   * @ignore\r\n   */\r\n  function Cluster(markerClusterer) {\r\n    this.markerClusterer_ = markerClusterer;\r\n    this.map_ = markerClusterer.getMap();\r\n    this.gridSize_ = markerClusterer.getGridSize();\r\n    this.minClusterSize_ = markerClusterer.getMinClusterSize();\r\n    this.averageCenter_ = markerClusterer.isAverageCenter();\r\n    this.center_ = null;\r\n    this.markers_ = [];\r\n    this.bounds_ = null;\r\n    this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\r\n        markerClusterer.getGridSize());\r\n  }\r\n\r\n  /**\r\n   * Determins if a marker is already added to the cluster.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to check.\r\n   * @return {boolean} True if the marker is already added.\r\n   */\r\n  Cluster.prototype.isMarkerAlreadyAdded = function(marker) {\r\n    if (this.markers_.indexOf) {\r\n      return this.markers_.indexOf(marker) != -1;\r\n    } else {\r\n      for (var i = 0, m; m = this.markers_[i]; i++) {\r\n        if (m == marker) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n\r\n  /**\r\n   * Add a marker the cluster.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to add.\r\n   * @return {boolean} True if the marker was added.\r\n   */\r\n  Cluster.prototype.addMarker = function(marker) {\r\n    if (this.isMarkerAlreadyAdded(marker)) {\r\n      return false;\r\n    }\r\n\r\n    if (!this.center_) {\r\n      this.center_ = marker.getPosition();\r\n      this.calculateBounds_();\r\n    } else {\r\n      if (this.averageCenter_) {\r\n        var l = this.markers_.length + 1;\r\n        var lat = (this.center_.lat() * (l-1) + marker.getPosition().lat()) / l;\r\n        var lng = (this.center_.lng() * (l-1) + marker.getPosition().lng()) / l;\r\n        this.center_ = new google.maps.LatLng(lat, lng);\r\n        this.calculateBounds_();\r\n      }\r\n    }\r\n\r\n    marker.isAdded = true;\r\n    this.markers_.push(marker);\r\n\r\n    var len = this.markers_.length;\r\n    if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\r\n      // Min cluster size not reached so show the marker.\r\n      marker.setMap(this.map_);\r\n    }\r\n\r\n    if (len == this.minClusterSize_) {\r\n      // Hide the markers that were showing.\r\n      for (var i = 0; i < len; i++) {\r\n        this.markers_[i].setMap(null);\r\n      }\r\n    }\r\n\r\n    if (len >= this.minClusterSize_) {\r\n      marker.setMap(null);\r\n    }\r\n\r\n    this.updateIcon();\r\n    return true;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the marker clusterer that the cluster is associated with.\r\n   *\r\n   * @return {MarkerClusterer} The associated marker clusterer.\r\n   */\r\n  Cluster.prototype.getMarkerClusterer = function() {\r\n    return this.markerClusterer_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the bounds of the cluster.\r\n   *\r\n   * @return {google.maps.LatLngBounds} the cluster bounds.\r\n   */\r\n  Cluster.prototype.getBounds = function() {\r\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\r\n    var markers = this.getMarkers();\r\n    for (var i = 0, marker; marker = markers[i]; i++) {\r\n      bounds.extend(marker.getPosition());\r\n    }\r\n    return bounds;\r\n  };\r\n\r\n\r\n  /**\r\n   * Removes the cluster\r\n   */\r\n  Cluster.prototype.remove = function() {\r\n    this.clusterIcon_.remove();\r\n    this.markers_.length = 0;\r\n    delete this.markers_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the center of the cluster.\r\n   *\r\n   * @return {number} The cluster center.\r\n   */\r\n  Cluster.prototype.getSize = function() {\r\n    return this.markers_.length;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the center of the cluster.\r\n   *\r\n   * @return {Array.<google.maps.Marker>} The cluster center.\r\n   */\r\n  Cluster.prototype.getMarkers = function() {\r\n    return this.markers_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the center of the cluster.\r\n   *\r\n   * @return {google.maps.LatLng} The cluster center.\r\n   */\r\n  Cluster.prototype.getCenter = function() {\r\n    return this.center_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Calculated the extended bounds of the cluster with the grid.\r\n   *\r\n   * @private\r\n   */\r\n  Cluster.prototype.calculateBounds_ = function() {\r\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\r\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\r\n  };\r\n\r\n\r\n  /**\r\n   * Determines if a marker lies in the clusters bounds.\r\n   *\r\n   * @param {google.maps.Marker} marker The marker to check.\r\n   * @return {boolean} True if the marker lies in the bounds.\r\n   */\r\n  Cluster.prototype.isMarkerInClusterBounds = function(marker) {\r\n    return this.bounds_.contains(marker.getPosition());\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the map that the cluster is associated with.\r\n   *\r\n   * @return {google.maps.Map} The map.\r\n   */\r\n  Cluster.prototype.getMap = function() {\r\n    return this.map_;\r\n  };\r\n\r\n\r\n  /**\r\n   * Updates the cluster icon\r\n   */\r\n  Cluster.prototype.updateIcon = function() {\r\n    var zoom = this.map_.getZoom();\r\n    var mz = this.markerClusterer_.getMaxZoom();\r\n\r\n    if (mz && zoom > mz) {\r\n      // The zoom is greater than our max zoom so show all the markers in cluster.\r\n      for (var i = 0, marker; marker = this.markers_[i]; i++) {\r\n        marker.setMap(this.map_);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (this.markers_.length < this.minClusterSize_) {\r\n      // Min cluster size not yet reached.\r\n      this.clusterIcon_.hide();\r\n      return;\r\n    }\r\n\r\n    var numStyles = this.markerClusterer_.getStyles().length;\r\n    var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\r\n    this.clusterIcon_.setCenter(this.center_);\r\n    this.clusterIcon_.setSums(sums);\r\n    this.clusterIcon_.show();\r\n  };\r\n\r\n\r\n  /**\r\n   * A cluster icon\r\n   *\r\n   * @param {Cluster} cluster The cluster to be associated with.\r\n   * @param {Object} styles An object that has style properties:\r\n   *     'url': (string) The image url.\r\n   *     'height': (number) The image height.\r\n   *     'width': (number) The image width.\r\n   *     'anchor': (Array) The anchor position of the label text.\r\n   *     'textColor': (string) The text color.\r\n   *     'textSize': (number) The text size.\r\n   *     'backgroundPosition: (string) The background postition x, y.\r\n   * @param {number=} opt_padding Optional padding to apply to the cluster icon.\r\n   * @constructor\r\n   * @extends google.maps.OverlayView\r\n   * @ignore\r\n   */\r\n  function ClusterIcon(cluster, styles, opt_padding) {\r\n    cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\r\n\r\n    this.styles_ = styles;\r\n    this.padding_ = opt_padding || 0;\r\n    this.cluster_ = cluster;\r\n    this.center_ = null;\r\n    this.map_ = cluster.getMap();\r\n    this.div_ = null;\r\n    this.sums_ = null;\r\n    this.visible_ = false;\r\n\r\n    this.setMap(this.map_);\r\n  }\r\n\r\n\r\n  /**\r\n   * Triggers the clusterclick event and zoom's if the option is set.\r\n   */\r\n  ClusterIcon.prototype.triggerClusterClick = function() {\r\n    var markerClusterer = this.cluster_.getMarkerClusterer();\r\n\r\n    // Trigger the clusterclick event.\r\n    google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_);\r\n\r\n    if (markerClusterer.isZoomOnClick()) {\r\n      // Zoom into the cluster.\r\n      this.map_.fitBounds(this.cluster_.getBounds());\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Adding the cluster icon to the dom.\r\n   * @ignore\r\n   */\r\n  ClusterIcon.prototype.onAdd = function() {\r\n    this.div_ = document.createElement('DIV');\r\n    if (this.visible_) {\r\n      var pos = this.getPosFromLatLng_(this.center_);\r\n      this.div_.style.cssText = this.createCss(pos);\r\n      this.div_.innerHTML = this.sums_.text;\r\n      var markerClusterer = this.cluster_.getMarkerClusterer();\r\n      if (markerClusterer.cssClass_) {\r\n        this.div_.className = markerClusterer.cssClass_;\r\n      }\r\n    }\r\n\r\n    var panes = this.getPanes();\r\n    panes.overlayMouseTarget.appendChild(this.div_);\r\n\r\n    var that = this;\r\n    google.maps.event.addDomListener(this.div_, 'click', function() {\r\n      that.triggerClusterClick();\r\n    });\r\n  };\r\n\r\n\r\n  /**\r\n   * Returns the position to place the div dending on the latlng.\r\n   *\r\n   * @param {google.maps.LatLng} latlng The position in latlng.\r\n   * @return {google.maps.Point} The position in pixels.\r\n   * @private\r\n   */\r\n  ClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\r\n    var pos = this.getProjection().fromLatLngToDivPixel(latlng);\r\n    pos.x -= parseInt(this.width_ / 2, 10);\r\n    pos.y -= parseInt(this.height_ / 2, 10);\r\n    return pos;\r\n  };\r\n\r\n\r\n  /**\r\n   * Draw the icon.\r\n   * @ignore\r\n   */\r\n  ClusterIcon.prototype.draw = function() {\r\n    if (this.visible_) {\r\n      var pos = this.getPosFromLatLng_(this.center_);\r\n      this.div_.style.top = pos.y + 'px';\r\n      this.div_.style.left = pos.x + 'px';\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Hide the icon.\r\n   */\r\n  ClusterIcon.prototype.hide = function() {\r\n    if (this.div_) {\r\n      this.div_.style.display = 'none';\r\n    }\r\n    this.visible_ = false;\r\n  };\r\n\r\n\r\n  /**\r\n   * Position and show the icon.\r\n   */\r\n  ClusterIcon.prototype.show = function() {\r\n    if (this.div_) {\r\n      var pos = this.getPosFromLatLng_(this.center_);\r\n      this.div_.style.cssText = this.createCss(pos);\r\n      this.div_.style.display = '';\r\n    }\r\n    this.visible_ = true;\r\n  };\r\n\r\n\r\n  /**\r\n   * Remove the icon from the map\r\n   */\r\n  ClusterIcon.prototype.remove = function() {\r\n    this.setMap(null);\r\n  };\r\n\r\n\r\n  /**\r\n   * Implementation of the onRemove interface.\r\n   * @ignore\r\n   */\r\n  ClusterIcon.prototype.onRemove = function() {\r\n    if (this.div_ && this.div_.parentNode) {\r\n      this.hide();\r\n      this.div_.parentNode.removeChild(this.div_);\r\n      this.div_ = null;\r\n    }\r\n  };\r\n\r\n\r\n  /**\r\n   * Set the sums of the icon.\r\n   *\r\n   * @param {Object} sums The sums containing:\r\n   *   'text': (string) The text to display in the icon.\r\n   *   'index': (number) The style index of the icon.\r\n   */\r\n  ClusterIcon.prototype.setSums = function(sums) {\r\n    this.sums_ = sums;\r\n    this.text_ = sums.text;\r\n    this.index_ = sums.index;\r\n    if (this.div_) {\r\n      this.div_.innerHTML = sums.text;\r\n    }\r\n\r\n    this.useStyle();\r\n  };\r\n\r\n\r\n  /**\r\n   * Sets the icon to the the styles.\r\n   */\r\n  ClusterIcon.prototype.useStyle = function() {\r\n    var index = Math.max(0, this.sums_.index - 1);\r\n    index = Math.min(this.styles_.length - 1, index);\r\n    var style = this.styles_[index];\r\n    this.url_ = style['url'];\r\n    this.height_ = style['height'];\r\n    this.width_ = style['width'];\r\n    this.textColor_ = style['textColor'];\r\n    this.anchor_ = style['anchor'];\r\n    this.textSize_ = style['textSize'];\r\n    this.backgroundPosition_ = style['backgroundPosition'];\r\n  };\r\n\r\n\r\n  /**\r\n   * Sets the center of the icon.\r\n   *\r\n   * @param {google.maps.LatLng} center The latlng to set as the center.\r\n   */\r\n  ClusterIcon.prototype.setCenter = function(center) {\r\n    this.center_ = center;\r\n  };\r\n\r\n\r\n  /**\r\n   * Create the css text based on the position of the icon.\r\n   *\r\n   * @param {google.maps.Point} pos The position.\r\n   * @return {string} The css style text.\r\n   */\r\n  ClusterIcon.prototype.createCss = function(pos) {\r\n    var style = [];\r\n    var markerClusterer = this.cluster_.getMarkerClusterer();\r\n    if (!markerClusterer.cssClass_) {\r\n      style.push('background-image:url(' + this.url_ + ');');\r\n      var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\r\n      style.push('background-position:' + backgroundPosition + ';');\r\n\r\n      if (typeof this.anchor_ === 'object') {\r\n        if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\r\n            this.anchor_[0] < this.height_) {\r\n          style.push('height:' + (this.height_ - this.anchor_[0]) +\r\n              'px; padding-top:' + this.anchor_[0] + 'px;');\r\n        } else {\r\n          style.push('height:' + this.height_ + 'px; line-height:' + this.height_ + 'px;');\r\n        }\r\n        if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\r\n            this.anchor_[1] < this.width_) {\r\n          style.push('width:' + (this.width_ - this.anchor_[1]) +\r\n              'px; padding-left:' + this.anchor_[1] + 'px;');\r\n        } else {\r\n          style.push('width:' + this.width_ + 'px; text-align:center;');\r\n        }\r\n      } else {\r\n        style.push('height:' + this.height_ + 'px; line-height:' +\r\n            this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\r\n      }\r\n\r\n      var txtColor = this.textColor_ ? this.textColor_ : 'black';\r\n      var txtSize = this.textSize_ ? this.textSize_ : 11;\r\n\r\n      style.push('cursor:pointer; color:' + txtColor + '; position:absolute; font-size:' +\r\n          txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\r\n    }\r\n    else {\r\n      style.push('top:' + pos.y + 'px; left:' +\r\n          pos.x + 'px;');\r\n    }\r\n    return style.join('');\r\n  };\r\n\r\n\r\n  // Export Symbols for Closure\r\n  // If you are not going to compile with closure then you can remove the\r\n  // code below.\r\n  window['MarkerClusterer'] = MarkerClusterer;\r\n  MarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\r\n  MarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\r\n  MarkerClusterer.prototype['clearMarkers'] =\r\n      MarkerClusterer.prototype.clearMarkers;\r\n  MarkerClusterer.prototype['fitMapToMarkers'] =\r\n      MarkerClusterer.prototype.fitMapToMarkers;\r\n  MarkerClusterer.prototype['getCalculator'] =\r\n      MarkerClusterer.prototype.getCalculator;\r\n  MarkerClusterer.prototype['getGridSize'] =\r\n      MarkerClusterer.prototype.getGridSize;\r\n  MarkerClusterer.prototype['getExtendedBounds'] =\r\n      MarkerClusterer.prototype.getExtendedBounds;\r\n  MarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\r\n  MarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\r\n  MarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\r\n  MarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\r\n  MarkerClusterer.prototype['getTotalClusters'] =\r\n      MarkerClusterer.prototype.getTotalClusters;\r\n  MarkerClusterer.prototype['getTotalMarkers'] =\r\n      MarkerClusterer.prototype.getTotalMarkers;\r\n  MarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\r\n  MarkerClusterer.prototype['removeMarker'] =\r\n      MarkerClusterer.prototype.removeMarker;\r\n  MarkerClusterer.prototype['removeMarkers'] =\r\n      MarkerClusterer.prototype.removeMarkers;\r\n  MarkerClusterer.prototype['resetViewport'] =\r\n      MarkerClusterer.prototype.resetViewport;\r\n  MarkerClusterer.prototype['repaint'] =\r\n      MarkerClusterer.prototype.repaint;\r\n  MarkerClusterer.prototype['setCalculator'] =\r\n      MarkerClusterer.prototype.setCalculator;\r\n  MarkerClusterer.prototype['setGridSize'] =\r\n      MarkerClusterer.prototype.setGridSize;\r\n  MarkerClusterer.prototype['setMaxZoom'] =\r\n      MarkerClusterer.prototype.setMaxZoom;\r\n  MarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\r\n  MarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\r\n\r\n  Cluster.prototype['getCenter'] = Cluster.prototype.getCenter;\r\n  Cluster.prototype['getSize'] = Cluster.prototype.getSize;\r\n  Cluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\r\n\r\n  ClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\r\n  ClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\r\n  ClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;"],"sourceRoot":""}